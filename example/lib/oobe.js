!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Oobe=e():t.Oobe=e()}(this||("undefined"!=typeof window?window:global),function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=6)}([function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._base={name:e}}var e,r,i;return e=t,(r=[{key:"$devError",value:function(t,e){throw new Error("(☉д⊙)!! Oobe::".concat(this._base.name," => ").concat(t," -> ").concat(e))}},{key:"$systemError",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"$_no_error";throw"$_no_error"!==n&&console.log("error data => ",n),console.error("Please take this error message to : https://github.com/SoftChef/oobe/issues/new"),new Error("(☉д⊙)!! System Error, Oobe::".concat(this._base.name," => ").concat(t," -> ").concat(e))}}])&&n(e.prototype,r),i&&n(e,i),t}();t.exports=r},function(t,e,n){function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,s;return e=t,s=[{key:"jpjs",value:function(t){return JSON.parse(JSON.stringify(t))}},{key:"getType",value:function(t){var e=i(t);return Array.isArray(t)?"array":null==t?"empty":"number"===e&&isNaN(t)?"NaN":t instanceof RegExp?"regexp":e}},{key:"isEmpty",value:function(e){var n=t.getType(e);return"empty"===n||("array"===n&&0===e.length||("object"===n&&0===Object.keys(e).length||"string"===n&&""===e))}},{key:"isSprite",value:function(t){return t instanceof u}},{key:"isCollection",value:function(t){return t instanceof a}},{key:"verify",value:function(e,n){var i={};for(var o in n){var s=e[o],u=r(n[o],3),a=u[0],c=u[1],f=u[2],l=t.getType(s);if("boolean"!==t.getType(a))throw new Error("Helper::verify => Required must be a boolean");if("array"!==t.getType(c))throw new Error("Helper::verify => Types must be a array");if(a&&null==s)throw new Error("Helper::verify => Key(".concat(o,") is required"));if(c&&null!=s&&!c.includes(l))throw new Error("Helper::verify => Type(".concat(o,"::").concat(l,") error, need ").concat(c.join(" or ")));i[o]=void 0===s?f:s}return i}},{key:"deepObjectAssign",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};for(var i in e){var o=e[i],s=n[i],u=t.getType(o);r[i]="object"===u?t.deepObjectAssign(o,s):void 0===s?o:s}return r}},{key:"generateId",value:function(){var t=Date.now();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)})}}],(n=null)&&o(e.prototype,n),s&&o(e,s),t}();t.exports=s;var u=n(3),a=n(4)},function(t,e,n){function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var n=Object.keys(t);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(t)),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(n,!0).forEach(function(e){u(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function l(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v=n(0),b=n(1),d=function(t){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(this,e),(r=l(this,y(e).call(this,"Event"))).type=t,r.parent=n,r.channels={},r.profile=s({type:t},i),r}return h(e,v),f(e,[{key:"addChannel",value:function(t){this.channels[t]=new m}},{key:"getChannel",value:function(t){return null==this.channels[t]&&this.addChannel(t),this.channels[t]}},{key:"on",value:function(t,e){return this.getChannel(t).addListener(e)}},{key:"once",value:function(t,e){return this.on(t,function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.apply(this,n),n[0].listener.off()})}},{key:"off",value:function(t,e){var n="string"==typeof e?e:e.id;this.getChannel(t).removeListener(n)}},{key:"emit",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];!1===Array.isArray(n)&&this.$systemError("emit","Params not a array."),this.trigger(e,t,n)}},{key:"trigger",value:function(t,e,n,r){var i=s({channelName:t,target:e},this.profile,{context:r});this.getChannel(t).broadcast(e,i,n),this.parent&&this.parent.trigger(this.type+"."+t,e,n,i)}}]),e}(),m=function(t){function e(){var t;return a(this,e),(t=l(this,y(e).call(this,"Channel"))).listeners={},t.listenerKeys=null,t}return h(e,v),f(e,[{key:"checkListener",value:function(t){null==this.listeners[t]&&this.$devError("checkListener","Listener id(".concat(t,") not found."))}},{key:"addListener",value:function(t){"function"!=typeof t&&this.$devError("addListener","Callback must be a function",t);var e=b.generateId();return this.listeners[e]=new g(this,e,t),this.listeners[e].export}},{key:"removeListener",value:function(t){this.checkListener(t),delete this.listeners[t]}},{key:"broadcast",value:function(t,e,n){for(var r=0,i=Object.values(this.listeners);r<i.length;r++){i[r].trigger(t,e,n)}}}]),e}(),g=function(t){function e(t,n,r){var i;return a(this,e),(i=l(this,y(e).call(this,"Listener"))).id=n,i.channel=t,i.callback=r,i.export={id:i.id,off:function(){i.channel.removeListener(i.id)}},i}return h(e,v),f(e,[{key:"trigger",value:function(t,e,n){var i;(i=this.callback).call.apply(i,[t,s({listener:this.export},e)].concat(r(n)))}}]),e}();t.exports=d},function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=n(1);function o(t){return t instanceof s?t:t.unit}var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._sprite=e,this._container=this._sprite.base.container,this.$self=null,this.$utils=this._container.options.utils,this.$helper=i,this.$configs=this._container.getConfigs()}var e,n,s;return e=t,(n=[{key:"$on",value:function(t,e){return this._sprite.event.on(t,e)}},{key:"$onOnce",value:function(t,e){return this._sprite.event.once(t,e)}},{key:"$off",value:function(t,e){return this._sprite.event.off(t,e)}},{key:"$emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._sprite.event.emit(this,t,n)}},{key:"$put",value:function(t){return o(this._sprite.put(t))}},{key:"$raw",value:function(t){return this._sprite.getRawdata(t)}},{key:"$meg",value:function(t,e){return this._container.getMessage(t,e)}},{key:"$out",value:function(){return o(this._sprite.out())}},{key:"$dead",value:function(){return o(this._sprite.dead())}},{key:"$born",value:function(t){return o(this._sprite.born(t))}},{key:"$copy",value:function(){return o(this._sprite.copy())}},{key:"$bind",value:function(t){return this._sprite.bind(t)}},{key:"$body",value:function(){return this._sprite.getBody()}},{key:"$keys",value:function(){return this._sprite.getKeys()}},{key:"$reset",value:function(t){return this._sprite.reset(t)}},{key:"$rules",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this._sprite.getRules(t,e)}},{key:"$toObject",value:function(){return this._sprite.toObject()}},{key:"$revive",value:function(){return o(this._sprite.revive())}},{key:"$export",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._sprite.export(t,n)}},{key:"$isFixed",value:function(t){return this._sprite.dist.isFixed(t)}},{key:"$isHidden",value:function(t){return this._sprite.dist.isHidden(t)}},{key:"$show",value:function(t){return!this._sprite.dist.isHidden(t)}},{key:"$toOrigin",value:function(){return this._sprite.toOrigin()}},{key:"$isChange",value:function(t){return this._sprite.isChange(t)}},{key:"$validate",value:function(){return this._sprite.validateAll(this)}},{key:"$distortion",value:function(t){return o(this._sprite.distortion(t))}},{key:"$dist",value:function(t){return this.$distortion(t)}},{key:"$setError",value:function(t){return this._sprite.setError(t)}},{key:"$live",get:function(){return this._sprite.status.live}},{key:"$distName",get:function(){return this._sprite.dist.name}},{key:"$ready",get:function(){return this._sprite.status.ready}},{key:"$error",get:function(){return this._sprite.getErrorMessage()}}])&&r(e.prototype,n),s&&r(e,s),t}();t.exports=s},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._collection=e}var e,r,i;return e=t,(r=[{key:"on",value:function(t,e){return this._collection.event.on(t,e)}},{key:"onOnce",value:function(t,e){return this._collection.event.once(t,e)}},{key:"off",value:function(t,e){return this._collection.event.off(t,e)}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._collection.event.emit(t,n)}},{key:"has",value:function(t){return this._collection.has(t)}},{key:"fetch",value:function(t){return this._collection.fetch(t)}},{key:"write",value:function(t){return this._collection.write(t)}},{key:"batchWrite",value:function(t){return this._collection.batchWrite(t)}},{key:"remove",value:function(t){return this._collection.remove(t)}},{key:"clear",value:function(){return this._collection.clear()}},{key:"size",get:function(){return this._collection.items.length}},{key:"items",get:function(){return this._collection.items.slice()}},{key:"dirty",get:function(){return this._collection.status.dirty}}])&&n(e.prototype,r),i&&n(e,i),t}();t.exports=r},function(t,e){t.exports={defaultDistortion:["read","create","delete","update"],protectPrefix:["self"],systemContainer:{sprites:{system:{body:function(){}}}}}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=n(0),c=n(7),f=n(1),l=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=o(this,s(e).call(this,"Oobe")))._core=new c,t.helper=f,t}var n,r,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,a),n=e,(r=[{key:"on",value:function(t,e){return this._core.event.on(t,e)}},{key:"onOnce",value:function(t,e){return this._core.event.once(t,e)}},{key:"off",value:function(t,e){return this._core.event.off(t,e)}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._core.event.emit(this,t,n)}},{key:"meg",value:function(t,e){return this._core.message.get(t,e)}},{key:"make",value:function(t,e){return this._core.make(t,e)}},{key:"batch",value:function(t,e,n){return this._core.batch(t,e,n)}},{key:"collection",value:function(t,e,n){return this._core.makeCollection(t,e,n)}},{key:"join",value:function(t,e,n){var r=this._core.addContainer(t,e),i=r.options.configs;return r.options.install.call(this,i,n)}},{key:"addon",value:function(t){this._core.addon(t)}},{key:"getRules",value:function(t){return this._core.getRules(t)}},{key:"validateForSprite",value:function(t,e,n){return this._core.validateForSprite(t,e,n)}},{key:"setLocale",value:function(t){this._core.setLocale(t)}},{key:"instanceof",value:function(t,e,n){return this._core.instanceof(t,e,n)}}])&&i(n.prototype,r),l&&i(n,l),e}();l.helper=f,t.exports=l},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=n(0),c=n(8),f=n(2),l=n(1),y=n(9),h=n(5),p=n(10),v=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=o(this,s(e).call(this,"Core"))).rule=new c,t.message=new y,t.containers={},t.init(),t}var n,r,v;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,a),n=e,(r=[{key:"init",value:function(){this.initEvent(),this.initSystemContainer()}},{key:"initEvent",value:function(){this.event=new f("core")}},{key:"initSystemContainer",value:function(){this.addContainer("__system__",h.systemContainer),this.systemSprite=this.make("__system__","system")}},{key:"getPrefix",value:function(t){return""===t&&this.$devError("getPrefix","This name(".concat(t,") is empty.")),!0===h.protectPrefix.includes(t)&&this.$devError("getPrefix","This name(".concat(t,") is protect.")),"#"+t+"."}},{key:"addon",value:function(t){var e=l.verify(t,{name:[!0,["string"]],rules:[!1,["object"],{}],locales:[!1,["object"],{}]}),n=this.getPrefix(e.name);this.rule.addMultiple(e.rules,n),this.message.add(e.locales,n)}},{key:"addContainer",value:function(t,e){return this.containers[t]?this.$devError("addContainer","Name(".concat(t,") already exists.")):(this.containers[t]=new p(this,t,e),this.containers[t])}},{key:"getRules",value:function(t){return this.rule.getMore(this.systemSprite,t)}},{key:"validateForSprite",value:function(t,e,n){var r=this.containers[t];return null==r?this.$devError("validateForSprite","Container name(".concat(t,") not found.")):r.validateForSprite(e,n)}},{key:"setLocale",value:function(t){this.message.setLocale(t)}},{key:"eachContainer",value:function(t){for(var e in this.containers)t(this.containers[e])}},{key:"instanceof",value:function(t,e,n){!1===l.isSprite(n)&&this.$devError("instanceof","Target not a sprite.");var r=n._container,i=n._sprite.base,o=this.containers[t];null==o&&this.$devError("instanceof","Container(".concat(t,") not found"));var s=o.spriteBases[e];return null==s&&this.$devError("instanceof","Sprite(".concat(t,") not found")),r===o&&i===s}},{key:"make",value:function(t,e){var n=this.containers[t];return null==n?this.$devError("make","Container name(".concat(t,") not found.")):n.make(e).unit}},{key:"batch",value:function(t,e,n){var r=this,i=l.getType(n),o=[];return"array"!==i&&this.$devError("batch","Data must be a array.",data),n.forEach(function(n){o.push(r.make(t,e).$born(n))}),o}},{key:"makeCollection",value:function(t,e,n){var r=this.containers[t];return null==r?this.$devError("makeCollection","Container name(".concat(t,") not found.")):r.makeCollection(e,n).unit}}])&&i(n.prototype,r),v&&i(n,v),e}();t.exports=v},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=n(0),c=n(1),f=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=o(this,s(e).call(this,"Rule"))).items={},t}var n,r,f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,a),n=e,(r=[{key:"add",value:function(t,e){this.items[t]&&this.$devError("add","The name(".concat(t,") already exists.")),"function"==typeof e&&(e={handler:e}),this.items[t]=c.verify(e,{handler:[!0,["function"]],allowEmpty:[!1,["boolean"],!0]})}},{key:"addMultiple",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";for(var n in t)this.add(e+n,t[n])}},{key:"get",value:function(t,e){var n=e.split("|"),r=n.shift(),i=this.items[r],o={};null==i&&this.$devError("get","Form rule list name(".concat(r,") not found."));var s=!0,u=!1,a=void 0;try{for(var f,l=n[Symbol.iterator]();!(s=(f=l.next()).done);s=!0){var y=f.value.split(":");o[y[0]]=void 0===y[1]||y[1]}}catch(t){u=!0,a=t}finally{try{s||null==l.return||l.return()}finally{if(u)throw a}}return function(e){return!(!i.allowEmpty||!c.isEmpty(e))||i.handler.call(t,e,o)}}},{key:"getMore",value:function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var a=s.value,c="function"==typeof a?a.bind(t):this.get(t,a);n.push(c)}}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}},{key:"validate",value:function(t,e,n){var r=this.getMore(t,n),i=!0,o=!1,s=void 0;try{for(var u,a=r[Symbol.iterator]();!(i=(u=a.next()).done);i=!0){var c=(0,u.value)(e);if(!0!==c)return c}}catch(t){o=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(o)throw s}}return!0}}])&&i(n.prototype,r),f&&i(n,f),e}();t.exports=f},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=n(0),c=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=o(this,s(e).call(this,"Locale"))).store={"en-us":{}},t.default=t.store["en-us"],t.setLocale(),t}var n,c,f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,a),n=e,(c=[{key:"setLocale",value:function(t){if(null==t&&(t="en-us"),"string"!=typeof t)return this.$devError("setLocale","Locale(".concat(t,") not be string."));this.messages=this.getStore(t)}},{key:"getStore",value:function(t){return null==this.store[t]&&(this.store[t]={}),this.store[t]}},{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("object"!==r(t))return this.$devError("set","Data not a object",t);for(var n in t){var i=this.getStore(n);for(var o in t[n])i[e+o]=t[n][o]}}},{key:"get",value:function(t,e){var n=this.messages[t]||this.default[t]||t;if(e)for(var r in e){var i=new RegExp("{".concat(r,"}"),"g");n=n.replace(i,e[r])}return n}}])&&i(n.prototype,c),f&&i(n,f),e}();t.exports=c},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=n(0),c=n(2),f=n(1),l=n(11),y=function(t){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=o(this,s(e).call(this,"Container"))).core=t,r.name=n,r.prefix="$"+r.name+".",r.spriteBases={},r.options=f.verify(i,{rules:[!1,["object"],{}],utils:[!1,["object"],{}],dists:[!1,["array"],[]],sprites:[!0,["object"]],locales:[!1,["object"],{}],configs:[!1,["object"],{}],methods:[!1,["object"],{}],install:[!1,["function"],function(){}],interface:[!1,["object"],{}]}),r.init(),r}var n,r,y;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,a),n=e,(r=[{key:"init",value:function(){this.initEvent(),this.initRules(),this.initInterface(),this.initSprites(),this.initMessage()}},{key:"initEvent",value:function(){this.event=new c("container",this.core.event,{name:this.name})}},{key:"initRules",value:function(){this.core.rule.addMultiple(this.options.rules,this.prefix)}},{key:"initSprites",value:function(){for(var t in this.options.sprites){var e=this.options.sprites[t],n=this.checkInterface(e);!0!==n&&this.$devError("initSprites",n),this.spriteBases[t]=new l(this,t,e)}}},{key:"initMessage",value:function(){this.core.message.add(this.options.locales,this.prefix)}},{key:"initInterface",value:function(){this.interface=f.verify(this.options.interface,{views:[!1,["array"],[]],dists:[!1,["array"],[]],methods:[!1,["array"],[]]})}},{key:"checkInterface",value:function(t){var e=this.verifyInterface("views",t),n=this.verifyInterface("dists",t),r=this.verifyInterface("methods",t);if(e.length+n.length+r.length===0)return!0;var i="Interface error for : ";return 0!==e.length&&(i+="\nviews[".concat(e.join(),"]")),0!==n.length&&(i+="\ndists[".concat(n.join(),"]")),0!==r.length&&(i+="\nmethods[".concat(r.join(),"]")),i}},{key:"verifyInterface",value:function(t,e){var n=e[t]||{},r=[],i=!0,o=!1,s=void 0;try{for(var u,a=this.interface[t][Symbol.iterator]();!(i=(u=a.next()).done);i=!0){var c=u.value;null==n[c]&&r.push(c)}}catch(t){o=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(o)throw s}}return r}},{key:"getRules",value:function(t,e){return this.core.rule.getMore(t,this.getNames(e))}},{key:"getMessage",value:function(t,e){return this.core.message.get(this.getName(t),e)}},{key:"getConfigs",value:function(){return this.options.configs}},{key:"getName",value:function(t){return"#"===t[0]?t:this.prefix+t}},{key:"getNames",value:function(t){for(var e=t.slice(),n=0;n<t.length;n++)e[n]=this.getName(t[n]);return e}},{key:"validate",value:function(t,e,n){return this.core.rule.validate(t,e,this.getNames(n))}},{key:"validateForSprite",value:function(t,e){var n=this.spriteBases[t];return null==n?this.$devError("make","Sprite ".concat(t," not found.")):n.create().validateAll(e)}},{key:"make",value:function(t){var e=this.spriteBases[t];return null==e?this.$devError("make","Sprite ".concat(t," not found.")):e.create()}},{key:"makeCollection",value:function(t,e){var n=this.spriteBases[t];return null==n?this.$devError("makeCollection","Sprite ".concat(t," not found.")):n.createCollection(e)}}])&&i(n.prototype,r),y&&i(n,y),e}();t.exports=y},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var n=Object.keys(t);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(t)),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=n(0),l=n(2),y=n(1),h=n(5),p=n(12),v=n(13),b=n(14),d=function(t){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=u(this,a(e).call(this,"Sprite"))).name=n,r.dists={},r.container=t,r.options=y.verify(i,{body:[!0,["function"]],refs:[!1,["object"],{}],self:[!1,["function"],function(){return{}}],born:[!1,["function"],function(t){return t}],views:[!1,["object"],{}],dists:[!1,["object"],{}],rules:[!1,["object"],{}],origin:[!1,["function"],function(){return this.$body()}],methods:[!1,["object"],{}],created:[!1,["function"],function(){}],collection:[!1,["object"],{}],defaultView:[!1,["function"],null],errorMessage:[!1,["function"],function(t){return t}]}),i.states)throw new Error("States already rename to dists.");return r.init(),r}var n,r,d;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,f),n=e,(r=[{key:"init",value:function(){this.initEvent(),this.initViews(),this.initDistortion(),this.initMethods()}},{key:"initEvent",value:function(){this.event=new l("sprite",this.container.event,{name:this.name})}},{key:"initDistortion",value:function(){var t=this.container.options.dists.concat(h.defaultDistortion),e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;this.dists[s]=new v(s,this.options.dists[s])}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"initViews",value:function(){var t=this,e=this.options.views;this.Views=function(t){this._views=e,this._target=t};var n=function(e){Object.defineProperty(t.Views.prototype,e,{get:function(){return this._views[e].apply(this._target,arguments)}})};for(var r in e)n(r)}},{key:"initMethods",value:function(){var t=this,e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(n,!0).forEach(function(e){o(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},this.container.options.methods,{},this.options.methods);this.Methods=function(t){this._target=t,this._methods=e};var n=function(e){t.Methods.prototype[e]=function(){return this._methods[e].apply(this._target,arguments)}};for(var r in e)n(r)}},{key:"isUs",value:function(t){return t._sprite.base===this}},{key:"getViews",value:function(t){return new this.Views(t)}},{key:"getMethods",value:function(t){return new this.Methods(t)}},{key:"create",value:function(){return new p(this)}},{key:"createCollection",value:function(){return new b(this)}}])&&s(n.prototype,r),d&&s(n,d),e}();t.exports=d},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=n(0),c=n(2),f=n(3),l=n(1),y=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=o(this,s(e).call(this,"Sprite"))).body={},n.refs={},n.soul=null,n.from=null,n.base=t,n.dist=t.dists.read,n.options=t.options,n.rawBody="",n.rawData=null,n.propertyNames=[],n.init(),n}var n,r,y;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,a),n=e,(r=[{key:"dataParse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return JSON.parse(t)}},{key:"dataStringify",value:function(t){return JSON.stringify(t)}},{key:"getBody",value:function(){var t=l.jpjs(this.body);return this.eachRefs(function(e,n){t[n]=e.getBody()}),t}},{key:"getKeys",value:function(){var t=Object.keys(this.base.options.refs);return this.propertyNames.concat(t)}},{key:"getErrorMessage",value:function(){return this.base.options.errorMessage(this.status.error)}},{key:"getProperty",value:function(t){if(this.propertyNames.includes(t))return this.unit[t];this.$devError("getProperty","Property name(".concat(t,") not found."))}},{key:"isLive",value:function(){return!1===this.status.live?(this.$devError("isLive","This Sprite is dead."),!1):!this.isError()||(this.$devError("isLive","This Sprite is error."),!1)}},{key:"isReady",value:function(){return!!this.status.ready}},{key:"isError",value:function(){return!!this.status.error}},{key:"isInitialization",value:function(){return!!this.status.init}},{key:"isChange",value:function(t){if(t&&this.getProperty(t)){var e=this.unit[t];return l.isSprite(e)?e.isChange():e!==this.dataParse(this.rawBody)[t]}var n=this.rawBody!==this.dataStringify(this.body);return!!n||(this.eachRefs(function(t){if(n=t.isChange())return"_break"}),n)}},{key:"export",value:function(t,e){var n=null;t?null==(n=this.base.dists[t])&&this.$devError("export","Dist(".concat(t,") not found.")):n=this.dist;var r=n.options.export.apply(this.unit,e);return this.event.emit(this.unit,"$export",[{result:r,dist:n.name}]),r}},{key:"toOrigin",value:function(){return this.options.origin.call(this.unit)}},{key:"out",value:function(){if(this.isLive())return this.soul=this.copy(),this.soul.from=this,this.sleep(),this.soul}},{key:"sleep",value:function(){this.status.live=!1,this.eachRefs(function(t){return t.sleep()})}},{key:"wakeup",value:function(){this.status.live=!0,this.eachRefs(function(t){return t.wakeup()})}},{key:"revive",value:function(){if(this.isLive()){if(this.from)return this.from.reborn(this.toOrigin()),this.dead();this.$devError("revive","This Sprite is root.")}}},{key:"copy",value:function(){if(this.isReady())return this.base.create().born(this.toOrigin()).distortion(this.dist.name);this.$devError("copy","Sprite not ready.")}},{key:"dead",value:function(){if(this.isLive()){var t=this.from;if(this.from)return this.from.wakeup(),this.from.soul=null,this.from=null,this.sleep(),t;this.$devError("dead","This Sprite is root.")}}},{key:"reborn",value:function(t){this.wakeup(),this.setBody(t)}},{key:"reset",value:function(t){this.isLive()&&(t?this.getProperty(t)&&(this.unit[t]=this.dataParse(this.rawBody)[t]):this.setBody(this.dataParse(this.rawData)))}},{key:"setBody",value:function(t){var e=this.options.born.call(this.unit,t)||{},n=!0,r=!1,i=void 0;try{for(var o,s=this.propertyNames[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;this.unit[u]=void 0===e[u]?this.unit[u]:e[u]}}catch(t){r=!0,i=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}this.eachRefs(function(t,n){t.isReady()?t.setBody(e[n]):t.born(e[n])}),this.unit.$self=this.base.options.self.call(this.unit,t)}},{key:"setError",value:function(t){this.status.error=t||"Unknown error",this.event.emit(this.unit,"$error",[t])}},{key:"put",value:function(t){if(this.isLive()){var e=!0,n=!1,r=void 0;try{for(var i,o=this.propertyNames[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;void 0!==t[s]&&(this.unit[s]=t[s])}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}this.eachRefs(function(e,n){void 0!==t[n]&&e.put(t[n])})}return this}},{key:"eachRefs",value:function(t){for(var e in this.refs){if("_break"===t(this.refs[e],e))break}}},{key:"distortion",value:function(t){if(this.isLive())return null==this.base.dists[t]?this.$devError("distortion","Name(".concat(t,") not found.")):(this.dist=this.base.dists[t],this.eachRefs(function(e){return e.distortion(t)}),this)}},{key:"bind",value:function(t){return null==this.unit.$fn[t]?this.$devError("bind","Method(".concat(t,") not found")):this.unit.$fn[t].bind(this.unit.$fn)}},{key:"born",value:function(t){if(this.isReady()&&this.$devError("born","Sprite is ready."),this.isLive())return this.setBody(t),this.rawBody=this.dataStringify(this.body),this.rawData=this.dataStringify(t),this.base.options.created.call(this.unit),this.status.ready=!0,this.event.emit(this.unit,"$ready"),this}},{key:"toObject",value:function(){var t=this.getBody();for(var e in t.$self={},t.$views={},t.$status=l.jpjs(this.status),this.base.options.views)t.$views[e]=this.unit.$views[e];for(var n in this.unit.$self)t.$self[n]=this.unit.$self[n];return t}},{key:"init",value:function(){this.initUnit(),this.initBody(),this.checkBody(),this.initEvent(),this.initStatus(),this.rawBody=this.dataStringify(this.body),this.rawData=null,this.propertyNames=Object.keys(this.body),this.status.init=!0}},{key:"initEvent",value:function(){this.event=new c("unit",this.base.event)}},{key:"initStatus",value:function(){this.status={live:!0,init:!1,error:null,ready:!1,isReference:!1}}},{key:"initUnit",value:function(){var t=this;if(this.unit=new f(this),this.unit.$fn=this.base.getMethods(this.unit),this.base.options.defaultView){var e=this.base.options.defaultView;this.unit.$views=new Proxy(this.base.getViews(this.unit),{get:function(n,r){var i=null;return n[r]&&(i=n[r]),i||(i=e.call(t.unit,{key:r})),i}})}else this.unit.$views=this.base.getViews(this.unit)}},{key:"initBody",value:function(){var t=this.options.refs,e=this.options.body.call(this.unit);for(var n in e)this.body[n]=e[n],Object.defineProperty(this.unit,n,{get:this.getDefineProperty("body",n),set:this.setDefineProperty(n)});for(var r in t)this.refs[r]=this.base.container.make(t[r]),this.refs[r].status.isReference=!0,Object.defineProperty(this.unit,r,{get:this.getDefineProperty("refs",r),set:this.setDefineProperty(r,!0)})}},{key:"checkBody",value:function(){for(var t in this.body){var e=this.body[t];"function"===l.getType(e)&&this.$devError("checkBody","Body ".concat(t," can't be a function.")),"$"!==t[0]&&"_"!==t[0]||this.$devError("checkBody","Body ".concat(t," has system symbol $ and _."))}}},{key:"getRules",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.base.options.rules[t];return null==n&&this.$devError("getRules","Rule name(".concat(t,") not found.")),this.base.container.getRules(this.unit,n.concat(e))}},{key:"getRawdata",value:function(t){var e=this.dataParse(this.rawData);return t?l.deepObjectAssign(e,t):e}},{key:"validate",value:function(t,e){var n=this.base.options.rules[e];return this.base.container.validate(this.unit,t,n)}},{key:"validateAll",value:function(t){for(var e=Object.keys(this.base.options.rules),n={},r=!0,i=0,o=e;i<o.length;i++){var s=o[i],u=t[s],a=this.validate(u,s);!0!==a&&(n[s]=a,r=!1)}return this.eachRefs(function(e,i){n[i]=e.validateAll(t[i]),!0!==n[i].success&&(r=!1)}),{result:n,success:r}}},{key:"getDefineProperty",value:function(t,e){var n=this;return"refs"===t?function(){return n.refs[e].unit}:function(){return n.body[e]}}},{key:"setDefineProperty",value:function(t,e){var n=this;return function(r){return!1===n.isLive()?n.$devError("set","This Sprite is dead."):e?n.$devError("set","This property(".concat(t,") is protect.")):void(n.body[t]=r)}}}])&&i(n.prototype,r),y&&i(n,y),e}();t.exports=y},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=n(0),c=n(1),f=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=o(this,s(e).call(this,"Distortion"))).name=t,n.options=c.verify(r,{fixed:[!1,["array","string"],[]],hidden:[!1,["array","string"],[]],export:[!1,["function"],function(){return this.$toOrigin()}]}),n}var n,r,f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,a),n=e,(r=[{key:"isFixed",value:function(t){return"*"===this.options.fixed||this.options.fixed.includes(t)}},{key:"isHidden",value:function(t){return"*"===this.options.hidden||this.options.hidden.includes(t)}}])&&i(n.prototype,r),f&&i(n,f),e}();t.exports=f},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var n=Object.keys(t);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(t)),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(n,!0).forEach(function(e){s(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=n(0),y=n(2),h=n(1),p=n(4),v=function(t){function e(t){var n,i,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,(n=!(o=a(e).call(this,"Collection"))||"object"!==r(o)&&"function"!=typeof o?c(i):o).map={},n.base=t,n.unit=new p(c(n)),n.items=[],n.event=new y("collection",n.base.event),n.status={dirty:!1},n.options=h.verify(t.options.collection,{key:[!1,["function","string"],"*"],write:[!1,["function"],function(t){(0,t.success)()}]}),n}var n,i,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,l),n=e,(i=[{key:"toPKey",value:function(t){return"$"+t}},{key:"getKeyIndex",value:function(t){var e=this.get(t);if(e)return this.items.findIndex(function(t){return t===e});this.$systemError("getKeyIndex","Key(".concat(t,") not found."))}},{key:"put",value:function(t,e){!1===this.has(t)?this.items.push(e):this.items.splice([this.getKeyIndex(t)],1,e),this.map[this.toPKey(t)]=e}},{key:"has",value:function(t){return!!this.get(t)}},{key:"get",value:function(t){return this.map[this.toPKey(t)]}},{key:"write",value:function(t){var e=this;"object"!==h.getType(t)&&this.$devError("write","Source not a object");var n=h.isSprite(t)?t:this.base.create().unit.$born(t),r="*"!==this.options.key?this.options.key(n):h.generateId();!1===this.base.isUs(n)&&this.$devError("write","Source not a ".concat(this.base.name," sprite.")),"string"!==h.getType(r)&&this.$devError("write","Write key(".concat(r,") not a string"));var i={key:r,sprite:n,source:t};this.status.dirty=!0,this.options.write.call(this.unit,{key:r,sprite:n,reject:function(t){return e.event.emit(e.unit,"$writeReject",[o({message:t},i)])},success:function(){e.put(r,n),e.event.emit(e.unit,"$writeSuccess",[i])}})}},{key:"batchWrite",value:function(t){"array"!==h.getType(t)&&this.$devError("batchWrite","Data not a array."),this.status.dirty=!0;var e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;this.write(s)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"fetch",value:function(t){var e=this.get(t);return e?this.event.emit(this.unit,"$fetch",[e]):this.event.emit(this.unit,"$fetchFail",[t]),e}},{key:"clear",value:function(){this.map={},this.items=[]}},{key:"remove",value:function(t){this.has(t)?(this.items.splice(this.getKeyIndex(t),1),delete this.map[this.toPKey(t)]):this.$devError("remove","Key(".concat(t,") not found."))}}])&&u(n.prototype,i),s&&u(n,s),e}();t.exports=v}])});