!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Oobe=e():t.Oobe=e()}(this||("undefined"!=typeof window?window:global),function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=6)}([function(t,e,n){(function(e){function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,s,c;return n=t,c=[{key:"jpjs",value:function(t){return JSON.parse(JSON.stringify(t))}},{key:"getType",value:function(t){var n=i(t);return null==t?"empty":Array.isArray(t)?"array":"number"===n&&isNaN(t)?"NaN":t instanceof RegExp?"regexp":t instanceof Promise?"promise":void 0!==e&&e.isBuffer(t)?"buffer":n}},{key:"isEmpty",value:function(e){var n=t.getType(e);return"empty"===n||"array"===n&&0===e.length||"object"===n&&0===Object.keys(e).length||"string"===n&&""===e}},{key:"isSprite",value:function(t){return t instanceof u}},{key:"isCollection",value:function(t){return t instanceof a}},{key:"verify",value:function(e,n){var i={};for(var o in n){var s=e[o],u=t.getType(s),a=r(n[o],3),c=a[0],f=a[1],l=a[2];if("boolean"!=typeof c)throw new Error("Helper::verify => Required must be a boolean");if(!0!==Array.isArray(f))throw new Error("Helper::verify => Types must be a array");if(c&&null==s)throw new Error("Helper::verify => Key(".concat(o,") is required"));if(f&&null!=s&&!f.includes(u))throw new Error("Helper::verify => Type(".concat(o,"::").concat(u,") error, need ").concat(f.join(" or ")));i[o]=void 0===s?l:s}return i}},{key:"deepObjectAssign",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};for(var i in e){var o=e[i],s=n[i],u=t.getType(o);r[i]="object"===u?t.deepObjectAssign(o,s):void 0===s?o:s}return r}},{key:"generateId",value:function(){var t=Date.now();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)})}},{key:"peel",value:function(e,n,r){var i=n.split(/[.[\]'"]/g).filter(function(t){return""!==t}).reduce(function(t,e){return t&&"undefined"!==t[e]?t[e]:void 0},e);return r&&t.isEmpty(i)?r:i}},{key:"mapping",value:function(e,n){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.isModel,s=!!i.reverse,u={},a=0,c=Object.entries(e);a<c.length;a++){var f=r(c[a],2),l=f[0],h=f[1],y=s?h:l,p=s?n[l]:n[h];o&&t.isCollection(p)?u[y]="body"===o?p.getBodys():p.getOrigins():o&&t.isSprite(p)?u[y]="body"===o?p.$body():p.$toOrigin():u[y]=p}return u}},{key:"setNull",value:function(t){var e={};for(var n in t)e[n]=null;return e}}],(s=null)&&o(n.prototype,s),c&&o(n,c),t}();t.exports=s;var u=n(3),a=n(4)}).call(this,n(9).Buffer)},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var r=[],i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._base={name:e}}var e,i,o;return e=t,o=[{key:"onDevError",value:function(t){r.push(t)}}],(i=[{key:"$devError",value:function(t,e){for(var n=0,i=r;n<i.length;n++)i[n].call(this,{name:this._base.name,target:this,message:e,functionName:t});throw new Error("(☉д⊙)!! Oobe::".concat(this._base.name," => ").concat(t," -> ").concat(e))}},{key:"$systemError",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"$_no_error";throw"$_no_error"!==n&&console.log("error data => ",n),console.error("Please take this error message to : https://github.com/SoftChef/oobe/issues/new"),new Error("(☉д⊙)!! System Error, Oobe::".concat(this._base.name," => ").concat(t," -> ").concat(e))}}])&&n(e.prototype,i),o&&n(e,o),t}();t.exports=i},function(t,e,n){function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=n(1),y=n(0),p=function(t){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o(this,e),(r=a(this,c(e).call(this,"Event"))).type=t,r.parent=n,r.channels={},r.profile=i,r.profile.type=t,r}return f(e,h),u(e,[{key:"addChannel",value:function(t){this.channels[t]=new v}},{key:"getChannel",value:function(t){return this.channels[t]}},{key:"getOrCreate",value:function(t){return null==this.channels[t]&&this.addChannel(t),this.channels[t]}},{key:"on",value:function(t,e){return this.getOrCreate(t).addListener(e)}},{key:"once",value:function(t,e){return this.on(t,function(t){e.apply(this,arguments),t.listener.off()})}},{key:"off",value:function(t,e){var n="string"==typeof e?e:e.id;this.getOrCreate(t).removeListener(n)}},{key:"emit",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];!1===Array.isArray(n)&&this.$systemError("emit","Params not a array."),this.trigger(e,t,n)}},{key:"trigger",value:function(t,e,n,r){var i=this.getChannel(t);if(null!=i||null!=this.parent){var o=Object.assign({channelName:t,target:e,context:r},this.profile);i&&i.broadcast(e,o,n),this.parent&&this.parent.trigger(this.type+"."+t,e,n,r)}}}]),e}(),v=function(t){function e(){var t;return o(this,e),(t=a(this,c(e).call(this,"Channel"))).listeners={},t}return f(e,h),u(e,[{key:"checkListener",value:function(t){null==this.listeners[t]&&this.$devError("checkListener","Listener id(".concat(t,") not found."))}},{key:"addListener",value:function(t){"function"!=typeof t&&this.$devError("addListener","Callback must be a function",t);var e=y.generateId();return this.listeners[e]=new d(this,e,t),this.listeners[e].export}},{key:"removeListener",value:function(t){this.checkListener(t),delete this.listeners[t]}},{key:"broadcast",value:function(t,e,n){for(var r=0,i=Object.values(this.listeners);r<i.length;r++){i[r].trigger(t,e,n)}}}]),e}(),d=function(t){function e(t,n,r){var i;return o(this,e),(i=a(this,c(e).call(this,"Listener"))).id=n,i.channel=t,i.callback=r,i.export={id:i.id,off:function(){i.channel.removeListener(i.id)}},i}return f(e,h),u(e,[{key:"trigger",value:function(t,e,n){var i,o=Object.assign({listener:this.export},e);0===n.length?this.callback.call(t,o):(i=this.callback).call.apply(i,[t,o].concat(r(n)))}}]),e}();t.exports=p},function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=n(0);function o(t){return t instanceof s?t:t.unit}var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._sprite=e,this._container=e.base.container,this.$self=null}var e,n,s;return e=t,(n=[{key:"$on",value:function(t,e){return this._sprite.event.on(t,e)}},{key:"$onOnce",value:function(t,e){return this._sprite.event.once(t,e)}},{key:"$off",value:function(t,e){return this._sprite.event.off(t,e)}},{key:"$emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._sprite.event.emit(this,t,n)}},{key:"$put",value:function(t){return o(this._sprite.put(t))}},{key:"$raw",value:function(t){return this._sprite.getRawdata(t)}},{key:"$meg",value:function(t,e){return this._container.getMessage(t,e)}},{key:"$out",value:function(){return o(this._sprite.out())}},{key:"$dead",value:function(){return o(this._sprite.dead())}},{key:"$born",value:function(t){return o(this._sprite.born(t))}},{key:"$copy",value:function(t){return o(this._sprite.copy(t))}},{key:"$bind",value:function(t){return this._sprite.bind(t)}},{key:"$body",value:function(){return this._sprite.getBody()}},{key:"$keys",value:function(){return this._sprite.getKeys()}},{key:"$reset",value:function(t){return this._sprite.reset(t)}},{key:"$rules",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this._sprite.getRules(t,e)}},{key:"$toObject",value:function(){return this._sprite.toObject()}},{key:"$revive",value:function(){return o(this._sprite.revive())}},{key:"$export",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._sprite.export(t,n)}},{key:"$isFixed",value:function(t){return this._sprite.dist.isFixed(t)}},{key:"$isHidden",value:function(t){return this._sprite.dist.isHidden(t)}},{key:"$show",value:function(t){return!this._sprite.dist.isHidden(t)}},{key:"$toOrigin",value:function(){return this._sprite.toOrigin()}},{key:"$isChange",value:function(t){return this._sprite.isChange(t)}},{key:"$validate",value:function(){return this._sprite.validateAll()}},{key:"$distortion",value:function(t){return o(this._sprite.distortion(t))}},{key:"$dist",value:function(t){return this.$distortion(t)}},{key:"$setError",value:function(t){return this._sprite.setError(t)}},{key:"$v",get:function(){return this._sprite.views}},{key:"$views",get:function(){return this._sprite.views}},{key:"$live",get:function(){return this._sprite.status.live}},{key:"$utils",get:function(){return this._container.options.utils}},{key:"$configs",get:function(){return this._container.getConfigs()}},{key:"$helper",get:function(){return i}},{key:"$distName",get:function(){return this._sprite.dist.name}},{key:"$ready",get:function(){return this._sprite.status.ready}},{key:"$error",get:function(){return this._sprite.getErrorMessage()}},{key:"$parent",get:function(){return this._sprite.parent}},{key:"$fn",get:function(){return this._sprite.functions}}])&&r(e.prototype,n),s&&r(e,s),t}();t.exports=s},function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=n(0),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._collection=e}var e,n,o;return e=t,(n=[{key:"setDirty",value:function(t){return this._collection.setDirty(t)}},{key:"forEach",value:function(t){return this._collection.forEach(t)}},{key:"getBodys",value:function(){return this._collection.getBodys()}},{key:"getOrigins",value:function(){return this._collection.getOrigins()}},{key:"getExports",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._collection.getExports(t,n)}},{key:"isChange",value:function(){return this._collection.isChange()}},{key:"validate",value:function(){return this._collection.validateAll()}},{key:"distAll",value:function(t){return this._collection.distortion(t)}},{key:"on",value:function(t,e){return this._collection.event.on(t,e)}},{key:"onOnce",value:function(t,e){return this._collection.event.once(t,e)}},{key:"off",value:function(t,e){return this._collection.event.off(t,e)}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._collection.event.emit(this,t,n)}},{key:"has",value:function(t){return this._collection.has(t)}},{key:"fetch",value:function(t){return this._collection.fetch(t)}},{key:"write",value:function(t){return this._collection.write(t)}},{key:"batchWrite",value:function(t){return this._collection.batchWrite(t)}},{key:"batchWriteOnlyKeys",value:function(t,e){return this._collection.batchWriteOnlyKeys(t,e)}},{key:"batchWriteAsync",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this._collection.batchWriteAsync(t,e,n)}},{key:"remove",value:function(t){return this._collection.remove(t)}},{key:"clear",value:function(){return this._collection.clear()}},{key:"toKey",value:function(t){return this._collection.options.key(t)}},{key:"size",get:function(){return this._collection.items.length}},{key:"items",get:function(){return this._collection.items}},{key:"dirty",get:function(){return this._collection.status.dirty}},{key:"views",get:function(){return this._collection.views}},{key:"methods",get:function(){return this._collection.methods}},{key:"utils",get:function(){return this._collection.base.container.options.utils}},{key:"configs",get:function(){return this._collection.base.container.getConfigs()}},{key:"helper",get:function(){return i}},{key:"parent",get:function(){return this._collection.parent}}])&&r(e.prototype,n),o&&r(e,o),t}();t.exports=o},function(t,e){t.exports={defaultDistortion:["read","create","delete","update"],protectPrefix:["self"],systemContainer:{sprites:{system:{body:function(){return{}}}}}}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=n(1),c=n(7),f=n(0),l=function(t){function e(){var t,n,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(i=o(e).call(this,"Oobe"))||"object"!==r(i)&&"function"!=typeof i?s(n):i)._core=new c(s(t)),t.helper=f,t}var n,l,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,a),n=e,(l=[{key:"on",value:function(t,e){return this._core.event.on(t,e)}},{key:"onOnce",value:function(t,e){return this._core.event.once(t,e)}},{key:"off",value:function(t,e){return this._core.event.off(t,e)}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._core.event.emit(this,t,n)}},{key:"meg",value:function(t,e){return this._core.message.get(t,e)}},{key:"make",value:function(t,e,n){return this._core.make(t,e,n)}},{key:"batch",value:function(t,e,n,r){return this._core.batch(t,e,n,r)}},{key:"collection",value:function(t,e,n){return this._core.makeCollection(t,e,n)}},{key:"join",value:function(t,e,n){var r=this._core.addContainer(t,e),i=r.options.configs;return r.options.install.call(this,i,n)}},{key:"addon",value:function(t){this._core.addon(t)}},{key:"plugin",value:function(t){return this._core.plugin(t)}},{key:"getRules",value:function(t){return this._core.getRules(t)}},{key:"setLocale",value:function(t){this._core.setLocale(t)}},{key:"instanceof",value:function(t,e,n){return this._core.instanceof(t,e,n)}}])&&i(n.prototype,l),h&&i(n,h),e}();l.helper=f,l.onDevError=a.onDevError,t.exports=l},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=n(1),c=n(8),f=n(2),l=n(0),h=n(14),y=n(5),p=n(15),v=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=o(this,s(e).call(this,"Core"))).oobe=t,n.rule=new c,n.plugins=[],n.message=new h,n.containers={},n.init(),n}var n,r,v;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,a),n=e,(r=[{key:"init",value:function(){this.initEvent(),this.initSystemContainer()}},{key:"initEvent",value:function(){this.event=new f("core")}},{key:"initSystemContainer",value:function(){this.addContainer("__system__",y.systemContainer),this.systemSprite=this.make("__system__","system")}},{key:"getPrefix",value:function(t){return""===t&&this.$devError("getPrefix","This name(".concat(t,") is empty.")),!0===y.protectPrefix.includes(t)&&this.$devError("getPrefix","This name(".concat(t,") is protect.")),"#"+t+"."}},{key:"addon",value:function(t){var e=l.verify(t,{name:[!0,["string"]],rules:[!1,["object"],{}],locales:[!1,["object"],{}]}),n=this.getPrefix(e.name);this.rule.addMultiple(e.rules,n),this.message.add(e.locales,n)}},{key:"addContainer",value:function(t,e){return this.containers[t]?this.$devError("addContainer","Name(".concat(t,") already exists.")):(this.containers[t]=new p(this,t,e),this.containers[t])}},{key:"getRules",value:function(t){return this.rule.getMore(this.systemSprite,t)}},{key:"setLocale",value:function(t){this.message.setLocale(t)}},{key:"plugin",value:function(t){return this.plugins.includes(t)?this.$devError("plugin","The patch has been registered"):(this.plugins.push(t),new t(this.oobe))}},{key:"eachContainer",value:function(t){for(var e in this.containers)t(this.containers[e])}},{key:"instanceof",value:function(t,e,n){!1===l.isSprite(n)&&this.$devError("instanceof","Target not a sprite.");var r=n._container,i=n._sprite.base,o=this.containers[t];null==o&&this.$devError("instanceof","Container(".concat(t,") not found"));var s=o.spriteBases[e];return null==s&&this.$devError("instanceof","Sprite(".concat(t,") not found")),r===o&&i===s}},{key:"make",value:function(t,e,n){var r=this.containers[t];return null==r?this.$devError("make","Container name(".concat(t,") not found.")):r.make(e,n).unit}},{key:"batch",value:function(t,e,n,r){var i=this,o=l.getType(n),s=[];return"array"!==o&&this.$devError("batch","Data must be a array.",data),n.forEach(function(n){s.push(i.make(t,e,r).$born(n))}),s}},{key:"makeCollection",value:function(t,e,n){var r=this.containers[t];return null==r?this.$devError("makeCollection","Container name(".concat(t,") not found.")):r.makeCollection(e,n).unit}}])&&i(n.prototype,r),v&&i(n,v),e}();t.exports=v},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=n(1),c=n(0),f=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=o(this,s(e).call(this,"Rule"))).items={},t}var n,r,f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,a),n=e,(r=[{key:"add",value:function(t,e){this.items[t]&&this.$devError("add","The name(".concat(t,") already exists.")),"function"==typeof e&&(e={handler:e}),this.items[t]=c.verify(e,{handler:[!0,["function"]],allowEmpty:[!1,["boolean"],!0]})}},{key:"addMultiple",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";for(var n in t)this.add(e+n,t[n])}},{key:"get",value:function(t,e){var n=e.split("|"),r=n.shift(),i=this.items[r],o={};null==i&&this.$devError("get","Form rule list name(".concat(r,") not found."));var s=!0,u=!1,a=void 0;try{for(var f,l=n[Symbol.iterator]();!(s=(f=l.next()).done);s=!0){var h=f.value.split(":");o[h[0]]=void 0===h[1]||h[1]}}catch(t){u=!0,a=t}finally{try{s||null==l.return||l.return()}finally{if(u)throw a}}return function(e){return!(!i.allowEmpty||!c.isEmpty(e))||i.handler.call(t,e,o)}}},{key:"getMore",value:function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var a=s.value,c="function"==typeof a?a.bind(t):this.get(t,a);n.push(c)}}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}},{key:"validate",value:function(t,e,n){var r=this.getMore(t,n),i=!0,o=!1,s=void 0;try{for(var u,a=r[Symbol.iterator]();!(i=(u=a.next()).done);i=!0){var c=(0,u.value)(e);if(!0!==c)return c}}catch(t){o=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(o)throw s}}return!0}}])&&i(n.prototype,r),f&&i(n,f),e}();t.exports=f},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(11),i=n(12),o=n(13);function s(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=a.prototype:(null===t&&(t=new a(e)),t.length=e),t}function a(t,e,n){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);a.TYPED_ARRAY_SUPPORT?(t=e).__proto__=a.prototype:t=h(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!a.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=u(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(a.isBuffer(e)){var n=0|y(e.length);return 0===(t=u(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?u(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function f(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(f(e),t=u(t,e<0?0:0|y(e)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|y(e.length);t=u(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function y(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function p(t,e){if(a.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return N(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(t).length;default:if(r)return N(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return j(this,e,n);case"ascii":return x(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function d(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function b(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=a.from(e,r)),a.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,i);if("number"==typeof e)return e&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,i){var o,s=1,u=t.length,a=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,u/=2,a/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var f=-1;for(o=n;o<u;o++)if(c(t,o)===c(e,-1===f?0:o-f)){if(-1===f&&(f=o),o-f+1===a)return f*s}else-1!==f&&(o-=o-f),f=-1}else for(n+a>u&&(n=u-a),o=n;o>=0;o--){for(var l=!0,h=0;h<a;h++)if(c(t,o+h)!==c(e,h)){l=!1;break}if(l)return o}return-1}function m(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var u=parseInt(e.substr(2*s,2),16);if(isNaN(u))return s;t[n+s]=u}return s}function w(t,e,n,r){return V(N(e,t.length-n),t,n,r)}function k(t,e,n,r){return V(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function _(t,e,n,r){return k(t,e,n,r)}function O(t,e,n,r){return V(K(e),t,n,r)}function E(t,e,n,r){return V(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function j(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,u,a,c=t[i],f=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=n)switch(l){case 1:c<128&&(f=c);break;case 2:128==(192&(o=t[i+1]))&&(a=(31&c)<<6|63&o)>127&&(f=a);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(a=(15&c)<<12|(63&o)<<6|63&s)>2047&&(a<55296||a>57343)&&(f=a);break;case 4:o=t[i+1],s=t[i+2],u=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&u)&&(a=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&u)>65535&&a<1114112&&(f=a)}null===f?(f=65533,l=1):f>65535&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|1023&f),r.push(f),i+=l}return function(t){var e=t.length;if(e<=P)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=P));return n}(r)}e.Buffer=a,e.SlowBuffer=function(t){+t!=t&&(t=0);return a.alloc(+t)},e.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),a.poolSize=8192,a._augment=function(t){return t.__proto__=a.prototype,t},a.from=function(t,e,n){return c(null,t,e,n)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(t,e,n){return function(t,e,n,r){return f(e),e<=0?u(t,e):void 0!==n?"string"==typeof r?u(t,e).fill(n,r):u(t,e).fill(n):u(t,e)}(null,t,e,n)},a.allocUnsafe=function(t){return l(null,t)},a.allocUnsafeSlow=function(t){return l(null,t)},a.isBuffer=function(t){return!(null==t||!t._isBuffer)},a.compare=function(t,e){if(!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=a.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!a.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},a.byteLength=p,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},a.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?j(this,0,t):v.apply(this,arguments)},a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t,e,n,r,i){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),u=Math.min(o,s),c=this.slice(r,i),f=t.slice(e,n),l=0;l<u;++l)if(c[l]!==f[l]){o=c[l],s=f[l];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},a.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},a.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},a.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return k(this,t,e,n);case"latin1":case"binary":return _(this,t,e,n);case"base64":return O(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function x(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function R(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=Y(t[o]);return i}function $(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function T(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,n,r,i,o){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function B(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function M(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function I(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(t,e,n,r,o){return o||I(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function L(t,e,n,r,o){return o||I(t,0,n,8),i.write(t,e,n,r,52,8),n+8}a.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),a.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=a.prototype;else{var i=e-t;n=new a(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},a.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},a.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},a.prototype.readUInt8=function(t,e){return e||T(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,e){return e||T(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,e){return e||T(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,e){return e||T(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,e){return e||T(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},a.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},a.prototype.readInt8=function(t,e){return e||T(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,e){e||T(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(t,e){e||T(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(t,e){return e||T(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return e||T(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,e){return e||T(t,4,this.length),i.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return e||T(t,4,this.length),i.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return e||T(t,8,this.length),i.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return e||T(t,8,this.length),i.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||C(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},a.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||C(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},a.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,1,255,0),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},a.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):B(this,t,e,!0),e+2},a.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):B(this,t,e,!1),e+2},a.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):M(this,t,e,!0),e+4},a.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},a.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);C(this,t,e,n,i-1,-i)}var o=0,s=1,u=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===u&&0!==this[e+o-1]&&(u=1),this[e+o]=(t/s>>0)-u&255;return e+n},a.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);C(this,t,e,n,i-1,-i)}var o=n-1,s=1,u=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===u&&0!==this[e+o+1]&&(u=1),this[e+o]=(t/s>>0)-u&255;return e+n},a.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,1,127,-128),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):B(this,t,e,!0),e+2},a.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):B(this,t,e,!1),e+2},a.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):M(this,t,e,!0),e+4},a.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},a.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},a.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},a.prototype.writeDoubleLE=function(t,e,n){return L(this,t,e,!0,n)},a.prototype.writeDoubleBE=function(t,e,n){return L(this,t,e,!1,n)},a.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},a.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=a.isBuffer(t)?t:N(new a(t,r).toString()),u=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%u]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function Y(t){return t<16?"0"+t.toString(16):t.toString(16)}function N(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function K(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(D,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(10))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),s=r[0],u=r[1],a=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,u)),f=0,l=u>0?s-4:s;for(n=0;n<l;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],a[f++]=e>>16&255,a[f++]=e>>8&255,a[f++]=255&e;2===u&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,a[f++]=255&e);1===u&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,a[f++]=e>>8&255,a[f++]=255&e);return a},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,u=n-i;s<u;s+=16383)o.push(f(t,s,s+16383>u?u:s+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,a=s.length;u<a;++u)r[u]=s[u],i[s.charCodeAt(u)]=u;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function f(t,e,n){for(var i,o,s=[],u=e;u<n;u+=3)i=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,s,u=8*i-r-1,a=(1<<u)-1,c=a>>1,f=-7,l=n?i-1:0,h=n?-1:1,y=t[e+l];for(l+=h,o=y&(1<<-f)-1,y>>=-f,f+=u;f>0;o=256*o+t[e+l],l+=h,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;f>0;s=256*s+t[e+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===a)return s?NaN:1/0*(y?-1:1);s+=Math.pow(2,r),o-=c}return(y?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,u,a,c=8*o-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:o-1,p=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-s))<1&&(s--,a*=2),(e+=s+l>=1?h/a:h*Math.pow(2,1-l))*a>=2&&(s++,a/=2),s+l>=f?(u=0,s=f):s+l>=1?(u=(e*a-1)*Math.pow(2,i),s+=l):(u=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[n+y]=255&u,y+=p,u/=256,i-=8);for(s=s<<i|u,c+=i;c>0;t[n+y]=255&s,y+=p,s/=256,c-=8);t[n+y-p]|=128*v}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=n(1),c=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=o(this,s(e).call(this,"Locale"))).store={"en-us":{}},t.default=t.store["en-us"],t.setLocale(),t}var n,c,f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,a),n=e,(c=[{key:"setLocale",value:function(t){if(null==t&&(t="en-us"),"string"!=typeof t)return this.$devError("setLocale","Locale(".concat(t,") not be string."));this.messages=this.getStore(t)}},{key:"getStore",value:function(t){return null==this.store[t]&&(this.store[t]={}),this.store[t]}},{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("object"!==r(t))return this.$devError("set","Data not a object",t);for(var n in t){var i=this.getStore(n);for(var o in t[n])i[e+o]=t[n][o]}}},{key:"get",value:function(t,e){var n=this.messages[t]||this.default[t]||t;if(e)for(var r in e){var i=new RegExp("{".concat(r,"}"),"g");n=n.replace(i,e[r])}return n}}])&&i(n.prototype,c),f&&i(n,f),e}();t.exports=c},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=n(1),c=n(2),f=n(0),l=n(16),h=function(t){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=o(this,s(e).call(this,"Container"))).core=t,r.name=n,r.prefix="$"+r.name+".",r.spriteBases={},r.options=f.verify(i,{rules:[!1,["object"],{}],utils:[!1,["object"],{}],dists:[!1,["array"],[]],sprites:[!0,["object"]],locales:[!1,["object"],{}],configs:[!1,["object"],{}],methods:[!1,["object"],{}],install:[!1,["function"],function(){}],interface:[!1,["object"],{}],collectionMethods:[!1,["object"],{}]}),r.init(),r}var n,r,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,a),n=e,(r=[{key:"init",value:function(){this.initEvent(),this.initRules(),this.initInterface(),this.initSprites(),this.initMessage()}},{key:"initEvent",value:function(){this.event=new c("container",this.core.event,{name:this.name})}},{key:"initRules",value:function(){this.core.rule.addMultiple(this.options.rules,this.prefix)}},{key:"initSprites",value:function(){for(var t in this.options.sprites){var e=this.options.sprites[t],n=this.checkInterface(e);!0!==n&&this.$devError("initSprites",n),this.spriteBases[t]=new l(this,t,e)}}},{key:"initMessage",value:function(){this.core.message.add(this.options.locales,this.prefix)}},{key:"initInterface",value:function(){this.interface=f.verify(this.options.interface,{views:[!1,["array"],[]],dists:[!1,["array"],[]],methods:[!1,["array"],[]]})}},{key:"checkInterface",value:function(t){var e=this.verifyInterface("views",t),n=this.verifyInterface("dists",t),r=this.verifyInterface("methods",t);if(e.length+n.length+r.length===0)return!0;var i="Interface error for : ";return 0!==e.length&&(i+="\nviews[".concat(e.join(),"]")),0!==n.length&&(i+="\ndists[".concat(n.join(),"]")),0!==r.length&&(i+="\nmethods[".concat(r.join(),"]")),i}},{key:"verifyInterface",value:function(t,e){var n=e[t]||{},r=[],i=!0,o=!1,s=void 0;try{for(var u,a=this.interface[t][Symbol.iterator]();!(i=(u=a.next()).done);i=!0){var c=u.value;null==n[c]&&r.push(c)}}catch(t){o=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(o)throw s}}return r}},{key:"getRules",value:function(t,e){return this.core.rule.getMore(t,this.getNames(e))}},{key:"getMessage",value:function(t,e){return this.core.message.get(this.getName(t),e)}},{key:"getConfigs",value:function(){return this.options.configs}},{key:"getName",value:function(t){return"#"===t[0]?t:this.prefix+t}},{key:"getNames",value:function(t){for(var e=t.slice(),n=0;n<t.length;n++)e[n]=this.getName(t[n]);return e}},{key:"validate",value:function(t,e,n){return this.core.rule.validate(t,e,this.getNames(n))}},{key:"make",value:function(t,e){var n=this.spriteBases[t];return null==n?this.$devError("make","Sprite ".concat(t," not found.")):n.create(e)}},{key:"makeCollection",value:function(t,e){var n=this.spriteBases[t];return null==n?this.$devError("makeCollection","Sprite ".concat(t," not found.")):n.createCollection(e)}}])&&i(n.prototype,r),h&&i(n,h),e}();t.exports=h},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(n,!0).forEach(function(e){s(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=n(1),h=n(2),y=n(0),p=n(5),v=n(17),d=n(19),b=n(20),g=function(t){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=a(this,c(e).call(this,"Sprite"))).name=n,r.dists={},r.cache=null,r.container=t,r.options=y.verify(i,{body:[!0,["function"]],refs:[!1,["object"],{}],self:[!1,["function"],function(){return{}}],born:[!1,["function"],function(t){return t}],views:[!1,["object"],{}],dists:[!1,["object"],{}],rules:[!1,["object"],{}],origin:[!1,["function"],function(){return this.$body()}],methods:[!1,["object"],{}],created:[!1,["function"],function(){}],collection:[!1,["object"],{}],defaultView:[!1,["function"],null],errorMessage:[!1,["function"],function(t){return t}]}),i.states)throw new Error("States already rename to dists.");return r.refKeys=Object.keys(r.options.refs),r.init(),r}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,l),n=e,(r=[{key:"init",value:function(){this.initEvent(),this.initViews(),this.initDistortion(),this.initMethods(),this.initCollectionViews(),this.initCollectionMethods()}},{key:"initEvent",value:function(){this.event=new h("sprite",this.container.event,{name:this.name})}},{key:"initDistortion",value:function(){var t=this.container.options.dists.concat(p.defaultDistortion),e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;this.dists[s]=new d(s,this.options.dists[s])}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"initViews",value:function(){var t=this,e=this.options.views;this.Views=function(t){this._views=e,this._target=t};var n=function(e){Object.defineProperty(t.Views.prototype,e,{get:function(){return this._views[e].apply(this._target,arguments)}})};for(var r in e)n(r)}},{key:"initMethods",value:function(){var t=this,e=o({},this.container.options.methods,{},this.options.methods);this.Methods=function(t){this._target=t,this._methods=e};var n=function(e){t.Methods.prototype[e]=function(){return this._methods[e].apply(this._target,arguments)}};for(var r in e)n(r)}},{key:"initCollectionViews",value:function(){var t=this,e=this.options.collection.views||{};this.CollectionViews=function(t){this._views=e,this._target=t};var n=function(e){Object.defineProperty(t.CollectionViews.prototype,e,{get:function(){return this._views[e].apply(this._target,arguments)}})};for(var r in e)n(r)}},{key:"initCollectionMethods",value:function(){var t=this,e=o({},this.options.collection.methods||{},{},this.container.options.collectionMethods);this.CollectionMethods=function(t){this._target=t,this._methods=e};var n=function(e){t.CollectionMethods.prototype[e]=function(){return this._methods[e].apply(this._target,arguments)}};for(var r in e)n(r)}},{key:"isUs",value:function(t){return t._sprite.base===this}},{key:"getViews",value:function(t){return new this.Views(t)}},{key:"getMethods",value:function(t){return new this.Methods(t)}},{key:"create",value:function(t){return new v(this,t)}},{key:"createCollection",value:function(t){return new b(this,t)}}])&&u(n.prototype,r),i&&u(n,i),e}();t.exports=g},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=n(1),c=n(2),f=n(3),l=n(0),h=n(18),y=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=o(this,s(e).call(this,"Sprite"))).body={},r.refs={},r.soul=null,r.from=null,r.base=t,r.dist=t.dists.read,r.views=null,r.parent=null,r.options=t.options,r.rawBody="",r.rawData=null,r.functions=null,r.refKeys=t.refKeys,r.propertyNames=[],r.setCustomOptions(n),r.init(),r}var n,r,y;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,a),n=e,(r=[{key:"setCustomOptions",value:function(t){this.customOptions=l.verify(t||{},{save:[!1,["boolean"],!0]})}},{key:"dataParse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return JSON.parse(t)}},{key:"dataStringify",value:function(t){return!1===this.customOptions.save?null:JSON.stringify(t)}},{key:"getBody",value:function(){var t=l.jpjs(this.body);return this.eachRefs(function(e,n,r){t[n]="sprite"===r?e.getBody():e.getBodys()}),t}},{key:"getKeys",value:function(){var t=Object.keys(this.base.options.refs);return this.propertyNames.concat(t)}},{key:"getErrorMessage",value:function(){return this.base.options.errorMessage(this.status.error)}},{key:"getProperty",value:function(t){if(this.propertyNames.includes(t))return this.unit[t];this.$devError("getProperty","Property name(".concat(t,") not found."))}},{key:"isLive",value:function(){return!1===this.status.live?(this.$devError("isLive","This Sprite is dead."),!1):!this.isError()||(this.$devError("isLive","This Sprite is error."),!1)}},{key:"isReady",value:function(){return!!this.status.ready}},{key:"isError",value:function(){return!!this.status.error}},{key:"isInitialization",value:function(){return!!this.status.init}},{key:"isChange",value:function(t){if(!1===this.customOptions.save&&this.$devError("isChange","Options save is false, so not cache rawdata."),t&&this.getProperty(t)){var e=this.unit[t];return l.isSprite(e)?e.isChange():e!==this.dataParse(this.rawBody)[t]}var n=this.rawBody!==this.dataStringify(this.body);return!!n||(this.eachRefs(function(t){if(n=t.isChange())return"_break"}),n)}},{key:"export",value:function(t,e){var n=null;t?null==(n=this.base.dists[t])&&this.$devError("export","Dist(".concat(t,") not found.")):n=this.dist;var r=n.options.export.apply(this.unit,e);return this.event.emit(this.unit,"$export",[{result:r,dist:n.name}]),r}},{key:"toOrigin",value:function(){return this.options.origin.call(this.unit)}},{key:"out",value:function(){if(this.isLive())return this.soul=this.copy(),this.soul.from=this,this.sleep(),this.soul}},{key:"sleep",value:function(){this.status.live=!1,this.eachRefs(function(t,e,n){"sprite"===n?t.sleep():t.forEach(function(t){t.sleep()})})}},{key:"wakeup",value:function(){this.status.live=!0,this.eachRefs(function(t,e,n){"sprite"===n?t.wakeup():t.forEach(function(t){t.wakeup()})})}},{key:"revive",value:function(){if(this.isLive()){if(this.from)return this.from.reborn(this.toOrigin()),this.dead();this.$devError("revive","This Sprite is root.")}}},{key:"copy",value:function(t){if(this.isReady())return this.base.create(t||this.customOptions).born(this.toOrigin()).distortion(this.dist.name);this.$devError("copy","Sprite not ready.")}},{key:"dead",value:function(){if(this.isLive()){var t=this.from;if(this.from)return this.from.wakeup(),this.from.soul=null,this.from=null,this.sleep(),t;this.$devError("dead","This Sprite is root.")}}},{key:"reborn",value:function(t){this.wakeup(),this.setBody(t)}},{key:"reset",value:function(t){!1===this.customOptions.save&&this.$devError("reset","Options save is false, so not cache rawdata."),this.isLive()&&(t?this.getProperty(t)&&(this.unit[t]=this.dataParse(this.rawBody)[t]):this.setBody(this.dataParse(this.rawData)),this.event.emit(this.unit,"$reset"))}},{key:"setBody",value:function(t){var e=this.options.born.call(this.unit,t)||{},n=!0,r=!1,i=void 0;try{for(var o,s=this.propertyNames[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;this.unit[u]=void 0===e[u]?this.unit[u]:e[u]}}catch(t){r=!0,i=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}this.eachRefs(function(t,n,r){"sprite"===r?t.isReady()?t.setBody(e[n]):t.born(e[n]):(t.clear(),e[n]&&t.batchWrite(e[n]))}),this.unit.$self=this.base.options.self.call(this.unit,t)}},{key:"setError",value:function(t){this.status.error=t||"Unknown error",this.event.emit(this.unit,"$error",[t])}},{key:"put",value:function(t){if(this.isLive()){var e=!0,n=!1,r=void 0;try{for(var i,o=this.propertyNames[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;void 0!==t[s]&&(this.unit[s]=t[s])}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}this.eachRefs(function(e,n,r){if("sprite"===r)void 0!==t[n]&&e.put(t[n]);else if(Array.isArray(t[n])){e.clear();var i=!0,o=!1,s=void 0;try{for(var u,a=t[n][Symbol.iterator]();!(i=(u=a.next()).done);i=!0){var c=u.value;e.write(e.generateSprite({}).$put(c))}}catch(t){o=!0,s=t}finally{try{i||null==a.return||a.return()}finally{if(o)throw s}}}})}return this}},{key:"eachRefs",value:function(t){var n=!0,r=!1,i=void 0;try{for(var o,s=this.refKeys[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value,a=this.refs[u]instanceof e?"sprite":"collection";if("_break"===t(this.refs[u],u,a))break}}catch(t){r=!0,i=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}},{key:"distortion",value:function(t){if(this.isLive())return null==this.base.dists[t]?this.$devError("distortion","Name(".concat(t,") not found.")):(this.dist=this.base.dists[t],this.eachRefs(function(e){e.distortion(t)}),this)}},{key:"bind",value:function(t){return null==this.functions[t]?this.$devError("bind","Method(".concat(t,") not found")):this.functions[t].bind(this.functions)}},{key:"born",value:function(t){if(this.isReady()&&this.$devError("born","Sprite is ready."),this.isLive())return this.setBody(t),this.rawBody=this.dataStringify(this.body),this.rawData=this.dataStringify(t),this.base.options.created.call(this.unit),this.status.ready=!0,this.event.emit(this.unit,"$ready"),this}},{key:"toObject",value:function(){var t=this.getBody();for(var e in t.$self={},t.$views={},t.$status=l.jpjs(this.status),t.$options=l.jpjs(this.customOptions),t.$profile={baseName:this.base.name,hasParent:!!this.parent,containerName:this.base.container.name},this.unit.$self)t.$self[e]=this.unit.$self[e];for(var n in this.base.options.views)t.$views[n]=this.views[n];return t}},{key:"init",value:function(){this.initUnit(),this.initBody(),this.initEvent(),this.initStatus(),this.checkBody(),this.rawBody=this.dataStringify(this.body),this.rawData=null,this.propertyNames=this.body?Object.keys(this.body):[],this.status.init=!0,this.event.emit(this.unit,"$init",[this.unit])}},{key:"initEvent",value:function(){this.event=new c("unit",this.base.event)}},{key:"initStatus",value:function(){this.status={live:!0,init:!1,error:null,ready:!1}}},{key:"initUnit",value:function(){var t=this;if(null==this.base.Unit&&(this.unit=new f(this),this.base.Unit=h(this)),this.unit=new this.base.Unit(this),this.functions=this.base.getMethods(this.unit),this.base.options.defaultView&&"undefined"!=typeof Proxy){var e=this.base.options.defaultView;this.views=new Proxy(this.base.getViews(this.unit),{get:function(n,r){var i=null;return null!=n[r]&&(i=n[r]),null==i&&(i=e.call(t.unit,{key:r})),i}})}else this.views=this.base.getViews(this.unit)}},{key:"initBody",value:function(){var t=this.options.refs;this.body=this.options.body.call(this.unit);var e=!0,n=!1,r=void 0;try{for(var i,o=this.refKeys[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value,u=t[s];"["===u[0]&&"]"===u[u.length-1]?this.refs[s]=this.base.container.makeCollection(u.slice(1,-1),this.customOptions):this.refs[s]=this.base.container.make(u,this.customOptions),this.refs[s].parent=this.unit}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"checkBody",value:function(){for(var t in this.body){var e=this.body[t];"function"===l.getType(e)&&this.$devError("checkBody","Body ".concat(t," can't be a function.")),"$"!==t[0]&&"_"!==t[0]||this.$devError("checkBody","Body ".concat(t," has system symbol $ and _."))}}},{key:"getRules",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.base.options.rules[t];return null==n&&this.$devError("getRules","Rule name(".concat(t,") not found.")),this.base.container.getRules(this.unit,n.concat(e))}},{key:"getRawdata",value:function(t){!1===this.customOptions.save&&this.$devError("getRawdata","Options save is false, so not cache rawdata.");var e=this.dataParse(this.rawData);return t?l.deepObjectAssign(e,t):e}},{key:"validate",value:function(t,e){var n=this.base.options.rules[e];return this.base.container.validate(this.unit,t,n)}},{key:"validateAll",value:function(){for(var t=Object.keys(this.base.options.rules),e={},n=!0,r=0,i=t;r<i.length;r++){var o=i[r],s=this.unit[o],u=this.validate(s,o);!0!==u&&(e[o]=u,n=!1)}return this.eachRefs(function(t,r){e[r]=t.validateAll(),!1===e[r].success&&(n=!1)}),{result:e,success:n}}}])&&i(n.prototype,r),y&&i(n,y),e}();t.exports=y},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=n(3);function a(t,e){return"refs"===t?function(){return this._sprite.refs[e].unit}:function(){return this._sprite.body[e]}}function c(t,e){return e?function(){this._sprite.$devError("set","This property(".concat(t,") is protect."))}:function(e){if("function"==typeof e)return this._sprite.$devError("set","Body data not allow function.");this._sprite.isLive()&&(this._sprite.body[t]=e)}}t.exports=function(t){var e=t.options.refs,n=t.options.body.call(t.unit),r=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,o(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,u),e}();for(var f in n)Object.defineProperty(r.prototype,f,{get:a("body",f),set:c(f)});for(var l in e)Object.defineProperty(r.prototype,l,{get:a("refs",l),set:c(l,!0)});return r}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=n(1),c=n(0),f=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=o(this,s(e).call(this,"Distortion"))).name=t,n.options=c.verify(r,{fixed:[!1,["array","string"],[]],hidden:[!1,["array","string"],[]],export:[!1,["function"],function(){return this.$toOrigin()}]}),n}var n,r,f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,a),n=e,(r=[{key:"isFixed",value:function(t){return"*"===this.options.fixed||this.options.fixed.includes(t)}},{key:"isHidden",value:function(t){return"*"===this.options.hidden||this.options.hidden.includes(t)}}])&&i(n.prototype,r),f&&i(n,f),e}();t.exports=f},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(n,!0).forEach(function(e){s(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=n(1),y=n(2),p=n(0),v=n(4),d=function(t){function e(t,n){var i,o,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(i=!(s=c(e).call(this,"Collection"))||"object"!==r(s)&&"function"!=typeof s?f(o):s).map={},i.base=t,i.unit=new v(f(i)),i.items=[],i.event=new y("collection",i.base.event),i.views=new t.CollectionViews(i.unit),i.methods=new t.CollectionMethods(i.unit),i.parent=null,i.status={dirty:!1},i.customOptions=n,i.options=p.verify(t.options.collection,{key:[!1,["function","string"],"*"],write:[!1,["function"],function(t){(0,t.success)()}],views:[!1,["object"],{}]}),i.bindWrite=i.options.write.bind(f(i)),i.event.emit(i.unit,"$init",[i.unit]),i}var n,i,d;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,h),n=e,(i=[{key:"toPKey",value:function(t){return"$"+t}},{key:"getKey",value:function(t){return"*"!==this.options.key?this.options.key(t):p.generateId()}},{key:"setDirty",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.status.dirty=!!t}},{key:"getKeyIndex",value:function(t){var e=this.get(t);if(e)return this.items.findIndex(function(t){return t===e});this.$systemError("getKeyIndex","Key(".concat(t,") not found."))}},{key:"generateSprite",value:function(t){return p.isSprite(t)?t:this.base.create(this.customOptions).unit.$born(t)}},{key:"forEach",value:function(t){for(var e=this.items.length,n=0;n<e&&"_break"!==t(this.items[n],n);n++);}},{key:"isChange",value:function(){var t=!1;return this.forEach(function(e){if(e.$isChange())return t=!0,"_break"}),t}},{key:"validateAll",value:function(){var t=this.items.length,e=new Array(t),n=!0;return this.forEach(function(t,r){e[r]=t.$validate(),!1===e[r].success&&(n=!1)}),{success:n,result:e}}},{key:"getBodys",value:function(){var t=this.items.length,e=new Array(t);return this.forEach(function(t,n){e[n]=t.$body()}),e}},{key:"getOrigins",value:function(){var t=this.items.length,e=new Array(t);return this.forEach(function(t,n){e[n]=t.$toOrigin()}),e}},{key:"getExports",value:function(t,e){var n=this.items.length,r=new Array(n);return this.forEach(function(n,i){r[i]=n.$export.apply(n,[t].concat(u(e)))}),r}},{key:"distortion",value:function(t){this.forEach(function(e){e.$dist(t)})}},{key:"put",value:function(t,e){e.parent=this.parent,!1===this.has(t)?this.items.push(e):this.items.splice([this.getKeyIndex(t)],1,e),this.map[this.toPKey(t)]=e}},{key:"has",value:function(t){return!!this.get(t)}},{key:"get",value:function(t){return this.map[this.toPKey(t)]}},{key:"write",value:function(t,e){var n=this,r=p.getType(t);"object"!==r&&"array"!==r&&this.$devError("write","Source not a object or array.");var i=this.generateSprite(t),s=this.getKey(i);!1===this.base.isUs(i)&&this.$devError("write","Source not a ".concat(this.base.name," sprite.")),"string"!==p.getType(s)&&this.$devError("write","Write key(".concat(s,") not a string"));var u=e?Object.assign({key:s,sprite:i,source:t},e):{key:s,sprite:i,source:t};this.status.dirty=!0,this.bindWrite({key:s,sprite:i,reject:function(t){return n.event.emit(n.unit,"$writeReject",[o({message:t},u)])},success:function(){n.put(s,i),n.event.emit(n.unit,"$writeSuccess",[u])}})}},{key:"batchWrite",value:function(t){"array"!==p.getType(t)&&this.$devError("batchWrite","Data not a array."),this.status.dirty=!0;var e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;this.write(s)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"batchWriteOnlyKeys",value:function(t,e){"array"!==p.getType(e)&&this.$devError("batchWriteOnlyKeys","Data not a array."),this.status.dirty=!0;var n=!0,r=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a=o.value;this.write(s({},t,a),{onlyKey:!0})}}catch(t){r=!0,i=t}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}}},{key:"batchWriteAsync",value:function(t,e,n){var r=this;return new Promise(function(i){var o=setInterval(function(){for(var e=0;e<n;e++){var s=t.shift();if(!s){clearInterval(o),i(!0),r.event.emit(r.unit,"$writeAsyncDone");break}r.write(s)}},e)})}},{key:"fetch",value:function(t){var e=this.get(t);return e?this.event.emit(this.unit,"$fetch",[e]):this.event.emit(this.unit,"$fetchFail",[t]),e}},{key:"clear",value:function(){this.event.emit(this.unit,"$clear",[]),this.map={},this.items=[]}},{key:"remove",value:function(t){this.has(t)?(this.items.splice(this.getKeyIndex(t),1),delete this.map[this.toPKey(t)]):this.$devError("remove","Key(".concat(t,") not found."))}}])&&a(n.prototype,i),d&&a(n,d),e}();t.exports=d}])});